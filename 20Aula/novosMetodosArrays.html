<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Novos métodos em arrays</title>
    <script>
        document.addEventListener("DOMContentLoaded", () => {

            const numbers = [1, 22, 33, 44, 55, 66, 77, 98]
            /*
            Metodo find() encontra algo num array e retorna esse valor se la estiver dentro
            */
            const found = numbers.find(item => item > 40)

            console.log(found)

            const users = [
                {
                    id: 1,
                    name: "Alvaro",
                    email: "alvaro@cenas.com",
                    active: true
                },
                {
                    id: 2,
                    name: "Patricia",
                    email: "patricia@cenas.com",
                    active: true
                },
                {
                    id: 3,
                    name: "Gustavo",
                    email: "gustavo@cenas.com",
                    active: false
                }
            ]

            const foundUsers = users.find(user => user.email === "patricia@cenas.com")
            console.log(foundUsers)

            /*metodo findIndex(), faz a mesma coisa que o find() mas em vez de encontrar  o valor, retorna a chave (a posição do array)*/
            const foundUserIndex = users.findIndex(user => user.id === 2);
            console.log(foundUserIndex, users[foundUserIndex]);
            users[foundUserIndex].email = "patricia@proton.com";
            console.log("Apos a alteração: ", users)

            /*metodo filter() encontra todos os valores que correspondam a condição que queiramos e cria um novo array com esses registros*/
            const evenNumbers = numbers.filter(number => number % 2 === 0);
            console.log("Mostrar só numeros pares: ", evenNumbers)

            const ativeUser = users.filter(user => user.active === true);
            console.log("Apenas utilizadores ativos: ", ativeUser)

            /*metodo forEach() percorre cada registro do array para fazer seja o que for com os ditos*/
            users.forEach(user => console.log(user.name, user.active))

            users.forEach((user, index) => {
                users[index].active = false;
            })
            console.log("Utilizadores foram todos desabilitados com forEach: ", users)

            /*metodo map() efetua uma transformação em cada registro do array retornando um novo array após transformação*/
            const transformedArray = numbers.map(number => number * 3);
            console.log("Numeros transformados com map: ", transformedArray);

            /* metodo reduce() transforma um array num unico valor*/
            const reducer = (accumulator, value) => accumulator + value;
            console.log(reducer(1, 2))

            const result = numbers.reduce(reducer);
            console.log(result)

            /*encontrar todas encomendas do dia 11 e obter o total delas somado*/
            const orders = [
                {
                    id: 1,
                    products: [],
                    date: "2025-02-10",
                    total: 200
                },
                {
                    id: 2,
                    products: [],
                    date: "2025-02-11",
                    total: 400
                },
                {
                    id: 3,
                    products: [],
                    date: "2025-02-11",
                    total: 20
                },
                {
                    id: 4,
                    products: [],
                    date: "2025-02-12",
                    total: 50
                },
            ]
            const reducerTotal = (accumulator, value) => accumulator + value.total;
            const ordersDay11 = orders.filter(order => order.date === "2025-02-11")
            const orderTotal = ordersDay11.reduce(reducer)

            console.log(ordersDay11)
            console.log(ordersDay11.reduce(reducerTotal, 0))

        })
    </script>
</head>

<body>

</body>

</html>